<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>WebBluetooth Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <h1>Web Bluetooth Demo</h1>
    <div>
      <button type="button" id="scan">Scan for Bluetooth</button>
    </div>
    <div>
      <output id="output"></output>
    </div>
    <script>
      'use strict';
      var scan = document.getElementById('scan');
      var output = document.getElementById('output');

      if ('bluetooth' in navigator && navigator.bluetooth.requestDevice) {
        scan.addEventListener('click', function () {
          navigator.bluetooth
            .requestDevice({
	      filters: [{
	        services: ['battery_service']
	      }],
            })
            .then(function (device) {
	      console.log(device);
	      output.innerHTML = device;
	    })
	    .catch(function (error) {
	      console.error(error);
	      output.innerHTML = error.message;
	    });
        });
      } else {
	scan.disabled = true;
        output.innerHTML = 'Web Bluetooth not supported';
      }
    </script>
  </body>
</html>
